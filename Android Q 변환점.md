안드로이드 10(Q) 변경점
===================================
###### 출처 : https://developer.android.com/about/versions/10/features?hl=ko#peer2peer

---
개인정보 보호 변경점
-------------------
1. 앱 파일 및 미디어로 범위가 지정된 외부 저장소 액세스
2. 백그라운드에서 기기 위치에 액세스하려면 권한이 필요
3. Android 9 이하를 타겟팅할 때 자동으로 부여되는 액세스
4. 기기가 Android 10으로 업그레이드될 경우의 액세스
5. 백그라운드에서 활동 시작에 관한 제한사항
6. 관심 연락처 제거
7. 무작위 MAC주소
8. /proc/net 파일 시스템 액세스 제한
9. 재설정할 수 없는 기기 식별자 제한
10. 클립보드 데이터 액세스 제한
11. USB 기기 일련번호 보호
12. 카메라 세부정보 및 메타데이터 액세스 제한
13. Wi-Fi 사용 및 중지 관련 제한사항
14. 구성된 Wi-Fi 네트워크 직접 액세스 제한
15. 전화 통신, 블루투스, Wi-Fi API에 FINE 위치 정보 액세스 권한 필요
16. 화면 콘텐츠에 대한 제한된 액세스
17. 레거시 앱에서 사용자 표시 권한 확인
18. 실제 활동 감지
19. UI에서 제거된 권한 그룹

동작 변경사항
-------------
1. 비 SDK 인터페이스 제한사항
2. 동작 탐색
3. NDK
4. Bionic 라이브러리 및 동적 링커 경로 변경사항
5. 실행 전용 메모리에 매핑된 시스템 바이너리/라이브러리
6. TLS 1.3 기본 사용 설정
7. SHA-1로 서명된 인증서가 TLS에서 신뢰되지 않음
8. KeyChain 동작 변경사항 및 개선 사항
9. 기타 TLS 및 암호화 변경사항
10. Wi-Fi Direct 방송
11. Wi-Fi Aware 기능
12. Go 기기의 SYSTEM_ALERT_WINDOW
13. 이전 Android 버전을 대상으로 하는 앱에 대한 경고
14. SHA-2 CBC 암호화 제품군 제거
15. 앱 사용
16. HTTPS 연결 변경
17. android.preference 라이브러리 지원 중단
18. ZIP 파일 유틸리티 라이브러리 변경사항
19. 카메라 변경사항(폴더블폰 때문에)
20. 배터리 사용량 추적
21. Android Beam 지원 중단

안드로이드 Q(10) 대응 방법
=========================
###### 출처 : https://brunch.co.kr/magazine/androidq

> Scoped storage = 개별 앱은 공용 폴더에 접근하거나 파일을 추가할 수 없다.
---
> >(Q이상, opt-in인경우 => 체크박스? 잘 이해가 안감)

+내부 저장소
ㅡㅡㅡㅡㅡㅡ
+외부 저장소   ==== > 사진 및 동영상, 음악, 다운로드(공용공간) 으로 바꾸고 = 오너쉽(누가 생성하였고 소유하는지) 이 명확히 제공
                                        => 다음과 같이 사용됨
                                        => MediaStore을 통해서 읽고 쓰며 다운로드 공간을 제외하고 해당타입에 맞는 파일만 저장하며, 추가권한이 필요없음
                          	    => 다음과 같은 효과를 기대함
                          	    => 다른 앱이 생성한 어플리케이션을 사용하기 위해서는 READ_MEDIA_IMAGES,VIDEO,AUDIO 권한이 필요함
                                        => 이와 동시에 다른것을 읽을수 있는 WRITE 자체가 삭제됨

     --> 다운로드 공간에 대한 권한이 자기 앱이 생성한것에서만 한정된 만큼 접근을 위해서는 반드시 기본 파일 선택기를 통해 사용자가 명시적으로 특정 파일을 선택해야만 가능하게 바뀌었다.

### 결론 : Q버젼에서는 절대경로를 사용불가능, 타 앱이 사용하는 저장을 위한 공간 WRITE불가능


1. 메니페스트에 다음과 같은 권한 선언하기
 android:name="android.permission.WRITE_EXTERNAL_STRAGE"
 android:maxSdkVersion="18"
2. 안드로이드 보안 권장 사항중 하나인 FileProvider를 사용하여 임시 Uri접근권한을 활용하여 넘기기
3. 해당 앱을 기본앱으로 설정하기 예를들면 SMS,전화,음악,홈과 같은것으로 그렇게 할경우 미디어 파일을 직접 수정가능
4. 베타버젼은 Scoped storage 가 꺼져있음 그러기 위해서는 adb 명령어로 활성화 시켜야함(지금은 어떻게 되었는지 잘모르겠음)

>>아무권한이 없을때 
---
1. 파일선택기 불러와서 읽고 쓰기 가능(ACTION_PICK)
2. SAF(Storage Access Framework) 불러와서 읽고 쓰기 가능(GET_CONTENT, OPEN_DOCUMENT, OPEN_DOCUMENT_TREE)
3. 샌드박스 영역 자유롭게
4. MediaStore로 공용공간에 파일을 생성, 생성한 파일을 읽고 쓸수 있다.
5. SAF를 사용하여서 파일 생성 -> 이때 파일은 자신이 생성한 파일로 간주됨

READ_MEDIA_XXXX권한 허가받았을때, 기본갤러리, 동영상 앱으로 지정되었을때
1. MediaStore.Images.Media.EXTERNAL_CONTENT_URI -> 공용 저장소에 접근해 저장된 미디어 목록을 확인 가능

대부분의 작업이 외부 저장소 없이 가능하나 다른앱이 생성한 파일 접근을 위해서는 SAF, 파일선택기, FileProvider 등을 통해 접근권한을 명시받아야함


> >SAF란?
---
Storage Access Framework로 4.4 버젼에 소개되어서 안드로이드 개발자사이트에 정리되어있다.
SAF를 통해 클라이언트 앱이 일관된 방식으로 파일을 탐색,읽기,쓰기 할수있는 환경을 제공밥ㄷ을수있음
SAF  -> 문서제공자 - 구글드라이브와 같이 문서 제공자
       -> 선택기 UI - 파일선택기
       -> 클라이언트 앱 - SAF를 통해 파일을 액세스 하려는 어플

ACTION_PICK과의 차이점
	1. 4.4부터 사용가능
	2. GET_CONTENT, OPEN_DOCUMENT, OPEN_DOCUMENT_TREE, CREATE_DOCUMENT 인텐트 실행
	3. 선택기 UI가 시스템 앱으로 제공된다. 기존 ACTION_PICK은 마음에 드는것을 사용자가 선택할수있었던과 다르게. 이 모든것은 전부 일관된 사용자 경험을 위해서이다.
	4. OPEN_DOCUMENT, OPEN_DOCUMNET_TREE 인텐트를 통해 선택된 파일에 대한 영구적인 접근 권한을 가진다.(앱재시작후에도)

Scoped Storage에서 파일 읽고 쓰기
---
1. 샌드박스 공간에서(자신의 패키지에서) 읽고 쓰기
2. Uri를 통해 공용저장소나 샌드박스 공간에 접근, 다른앱에 파일 전달하는 경우 
3. 공용저장소(MeidaStore)에 접근할때도 Uri를 사용
4. 앱이 삭제 될경우 샌드 박스 공간도 같이 삭제되며 공용저장소를 이용할경우 후에 삭제시 팝업창이 표시된다.






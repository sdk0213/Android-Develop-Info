# 종속 항목 삽입
### 종속 항목 삽입이란?
* 클래스를 만들고 사용할때는 거의 원 헌드래드 퍼센트까지는 아니여도 많은경우에 다른 클래스가 필요하다. 이는 잘못 설계된 코드이거나 아키텍쳐가 개판일경우 더욱 심해진다. 
**여하튼 이런 많은경우에 다른클래스에 종속되는 다른 클래스를 삽입하는것을 종속 항목 삽입이라고 한다.**
---
### 종속 항목 삽입을 넣지 않고 코딩할경우
* 코드가 개판이 될수 있는 두가지 경우를 알아보자
##### 그냥 자체 인스턴스를 가지고 초기화하기
* ```kotlin
  class Car {

    private val engine = Engine()

    fun start() {
        engine.start()
    }
  }

  fun main(args: Array) {
      val car = Car()
      car.start()
  }
##### 다른 곳에서 객체를 가져오기
* ```kotlin
  class Car {
  
    fun start()
        Main.getEngine.start() // Main, getEngine 은 아마도 static 
    }
    
  }
  
  fun main(args: Array) {
      val.car =  Car()
      car.start()
  }
---
### 위 세가지 코드의 문제점
* 서브클래스 또는 다른 클래스로 대체 구현을 쉽게 사용할 수 없다.
* 테스트 매우매우 힘들어짐
---
### 종속 항목 삽입 사용하기
##### 생성자 삽입
* ```kotlin
  class Car(private val engine: Engine) {

    fun start() {
        engine.start()
    }
  }

  fun main(args: Array) {
      val engine = Engine()
      val car = Car(engine)
      car.start()
  }
##### 필드 삽입(또는 setter 삽입)
* ```kotlin
  class Car {
    lateinit var engine: Engine

    fun start() {
        engine.start()
    }
  }

  fun main(args: Array) {
      val car = Car()
      car.engine = Engine()
      car.start()
  }
##### 장점
* FakeEngine이라는 Engine의 테스트 더블을 생성하여 다양한 테스트에 맞게 구성할 수 있다.
* DI를 사용한다면 업데이트된 ElectricEngine 서브클래스의 인스턴스를 전달하기만 하면 되며 Car는 추가 변경 없이도 계속 작동
* 코드 변경이 용이해진다.
  
